<!doctype html>
<html>
    <head>
        <title>TrenDJ</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <!--<script type="text/javascript" src="app.js"></script>
        <script type="text/javascript" src="twitterdj.js"></script>-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
        <script>
            function printArtistID(){
                var title = document.getElementById('title').value;
                title = title.replace(" ", "%20");
                var artist = document.getElementById('artist').value;
                artist = artist.replace(" ", "%20");
                console.log(title, artist);
                var api_key = "HZT5WORGF1V4ABF99";
                var url = "http://developer.echonest.com/api/v4/song/search?api_key=HZT5WORGF1V4ABF99&format=json&results=1&artist="+ artist +"&title="+ title+"&bucket=id:spotify&bucket=tracks&limit=true"
                /*var url = "http://developer.echonest.com/api/v4/song/search?api_key=HZT5WORGF1V4ABF99&format=json&results=1&artist="
                    + artist + "&title=" + title;*/

                console.log(url);

                $.getJSON(url).success(function(JSON_CALLBACK){

                    var trackID = JSON_CALLBACK.response.songs[0].tracks[0].foreign_id;
                    //var artistID = JSON_CALLBACK.response.songs[0].artist_id;
                    console.log(trackID);
                    /*$('div.player').show()
                    url = "http://developer.echonest.com/api/v4/artist/twitter?api_key=HZT5WORGF1V4ABF99&id="+ artist_id + "&format=json"
                    $.getJSON(url).success(function(JSON_CALLBACK){
                        console.log(JSON_CALLBACK)
                    });*/
                    
                        console.log(trackID);
                        songID = "5Z7ygHQo02SUrFmcgpwsKW";
                        $("#spotify").attr("src","https://embed.spotify.com/?uri="+trackID);

            });
            };
        </script>
    </head>
    <body>
        <h1 align="center">Searching Echonest</h1>
        <div class="container">
            <div>
                <div class="jumbotron" style="padding:5px;" align="center">
                    <div class="input-group">
                        <input type="text" class="form-control" id="title" placeholder= "Enter song title">
                    </div>
                    <div class="input-group">
                        <input type="text" class="form-control" id="artist" placeholder="Enter artist name">
                    </div>
                    <button type="button" onclick="printArtistID()">Search</button>
                    <div class="player">
                        <iframe id="spotify" src="https://embed.spotify.com/?uri=spotify:track:4th1RQAelzqgY7wL53UGQt" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>
                    </div>
                    <div class="row">
                        <!--<div class="col-sm-2">
                            <img class="img-rounded" id="twitterPic" src=></img>
                        </div>
                        <div class="col-sm-4"><strong>{{twt.name}}</strong></div>
                        <div class="col-sm-6"><p style="font-size: 2.5vh">{{twt.message}}</p></div>-->
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
